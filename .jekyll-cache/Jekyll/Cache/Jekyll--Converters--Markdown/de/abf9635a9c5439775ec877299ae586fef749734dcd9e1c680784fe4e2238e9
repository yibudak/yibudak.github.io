I"€-<p>Merhaba, son zamanlarda birÃ§ok insanÄ±n bu iÅŸle ilgilenmesinden dolayÄ± Twitterâ€™dan veri Ã§ekmek hayli zorlaÅŸmÄ±ÅŸ durumda. Limitlere takÄ±lmayan, doÄŸru sonuÃ§ Ã¼reten bir scrapper yazmak istediÄŸiniz zaman artÄ±k Twitter APIâ€™den baÅŸka bir yol yokmuÅŸ gibi gÃ¶rÃ¼nse de Twint kÃ¼tÃ¼phanesi bu iÅŸi muazzam derecede baÅŸarÄ±yor.</p>

<p><img src="post_resources/twitter-scrapping/head.png" alt="image" class="postimg" /></p>

<h1 id="twint-kÃ¼tÃ¼phanesi-hakkÄ±nda"><a href="#header-3"></a>Twint kÃ¼tÃ¼phanesi hakkÄ±nda</h1>

<p>Twint kÃ¼tÃ¼phanesi son zamanlarda kullandÄ±ÄŸÄ±m en sorunsuz twitter scrapping aracÄ±. DiÄŸer kÃ¼tÃ¼phanelere baktÄ±ÄŸÄ±mÄ±zda Ã§oÄŸunun Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± veya API key istediÄŸini gÃ¶rÃ¼yoruz. Twint ise ne API eriÅŸimi istiyor ne de bizi saÃ§ma sapan hatalarla uÄŸraÅŸtÄ±rÄ±yor.</p>

<p>BaÅŸlÄ±ca Ã¶zellikleri ÅŸu ÅŸekilde;</p>

<ul>
  <li>Neredeyse bÃ¼tÃ¼n tweetleri Ã§ekebilir. (yaklaÅŸÄ±k 3200 tweet ile sÄ±nÄ±rlÄ±)</li>
  <li>Tor aÄŸÄ± desteÄŸi</li>
  <li>Verileri dataframeâ€™e kaydetme (pandas kullanarak)</li>
  <li>HÄ±zlÄ± ve basit kurulum</li>
  <li>Kullanmak iÃ§in Twitterâ€™a giriÅŸ yapmaya gerek yok, anonim olarak bÃ¼tÃ¼n fonksiyonlarÄ±nÄ± kullanabilirsiniz.</li>
</ul>

<h1 id="kurulumu-ve-kullanÄ±mÄ±"><a href="#header-3"></a>Kurulumu ve kullanÄ±mÄ±</h1>

<p>Kurmak iÃ§in:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install --user --upgrade git+https://github.com/twintproject/twint.git@origin/master#egg=twint
</code></pre></div></div>

<p>Komut satÄ±rÄ±ndan kullanmak isterseniz:</p>

<p><code class="language-plaintext highlighter-rouge">twint -u hesap_adi (tanÄ±mladÄ±ÄŸÄ±nÄ±z hesabÄ±n bÃ¼tÃ¼n tweetlerini listeler)</code></p>

<p><code class="language-plaintext highlighter-rouge">twint -u hesap_adi -s kelime (tanÄ±mladÄ±ÄŸÄ±nÄ±z hesapta X kelimeyi iÃ§eren bÃ¼tÃ¼n tweetleri listeler)</code></p>

<p><code class="language-plaintext highlighter-rouge">twint -u hesap_adi --following (tanÄ±mladÄ±ÄŸÄ±nÄ±z hesabÄ±n takip ettiÄŸi kullanÄ±cÄ±lar listeler)</code></p>

<p>gibi Ã¶rnekler mevcut, isterseniz projenin Github sayfasÄ±na bakarak daha detaylÄ± inceleyebilirsiniz.</p>

<h1 id="kod-iÃ§erisinde-twint-Ã§alÄ±ÅŸtÄ±rmak"><a href="#header-3"></a>Kod iÃ§erisinde Twint Ã§alÄ±ÅŸtÄ±rmak</h1>

<p>Can sÄ±kÄ±ntÄ±sÄ±ndan yazdÄ±ÄŸÄ±m bir kodu aÅŸaÄŸÄ±ya paylaÅŸÄ±yorum elimden geldiÄŸince karmaÅŸÄ±k yerlere yorum ekledim, kod merkezinize ekleyebilirsiniz. Herkese kolay gelsin.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">twint</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span> <span class="c1"># sÃ¼reci takip etmek iÃ§in
</span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">requests.packages.urllib3.exceptions</span> <span class="kn">import</span> <span class="n">InsecureRequestWarning</span>


<span class="k">def</span> <span class="nf">get_verified_users</span><span class="p">():</span> <span class="c1">#twitter mavi tikli kullanÄ±cÄ±larÄ± @verified kullanÄ±cÄ±sÄ±nda takip ediyor.
</span>    <span class="n">c</span> <span class="o">=</span> <span class="n">twint</span><span class="p">.</span><span class="n">Config</span><span class="p">()</span>
    <span class="n">c</span><span class="p">.</span><span class="n">Username</span> <span class="o">=</span> <span class="s">"verified"</span>
    <span class="n">c</span><span class="p">.</span><span class="n">Store_csv</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">c</span><span class="p">.</span><span class="n">Output</span> <span class="o">=</span> <span class="s">"verified_users.csv"</span>
    <span class="n">twint</span><span class="p">.</span><span class="n">run</span><span class="p">.</span><span class="n">Following</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unshorten_link</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
<span class="s">'''
twitter hesabÄ±nda ekli olan URL,
bir kÄ±saltma servisinden geÃ§iyor,
gerÃ§ek URL'ye eriÅŸmek iÃ§in.
'''</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">real_url</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                 <span class="n">verify</span><span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">real_url</span> <span class="o">=</span> <span class="s">"No website"</span>
        <span class="k">return</span> <span class="n">real_url</span>
    <span class="k">return</span> <span class="n">real_url</span><span class="p">.</span><span class="n">url</span>


<span class="k">def</span> <span class="nf">library_caller</span><span class="p">(</span><span class="n">username</span><span class="p">):</span> <span class="c1"># kÃ¼tÃ¼phaneyi burada kullanÄ±yoruz
</span>    <span class="n">user_attr</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">username</span> <span class="o">==</span> <span class="s">'username'</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">twint</span><span class="p">.</span><span class="n">Config</span><span class="p">()</span>
    <span class="n">config</span><span class="p">.</span><span class="n">Username</span> <span class="o">=</span> <span class="n">username</span>
    <span class="n">config</span><span class="p">.</span><span class="n">Store_object</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">config</span><span class="p">.</span><span class="n">Store_object_users_list</span> <span class="o">=</span> <span class="n">user_attr</span>
    <span class="n">config</span><span class="p">.</span><span class="n">Hide_output</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">config</span><span class="p">.</span><span class="n">Retries_count</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">twint</span><span class="p">.</span><span class="n">run</span><span class="p">.</span><span class="n">Lookup</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">user_attr</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">url</span><span class="p">:</span>
        <span class="n">web</span> <span class="o">=</span> <span class="n">get_unshorten_link</span><span class="p">(</span><span class="n">user_attr</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">url</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">web</span> <span class="o">=</span> <span class="s">"No Website"</span>
    <span class="k">return</span> <span class="n">username</span><span class="p">,</span> <span class="n">web</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">file_username</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'verified_users.csv'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">usernames</span> <span class="o">=</span> <span class="n">file_username</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">file_username</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"verified_users_data.csv"</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">usernames</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">library_caller</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">"Username"</span><span class="p">:</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="s">"Website"</span><span class="p">:</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]]})</span>
                <span class="n">data_frame</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="nb">file</span><span class="p">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">continue</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">requests</span><span class="p">.</span><span class="n">packages</span><span class="p">.</span><span class="n">urllib3</span><span class="p">.</span><span class="n">disable_warnings</span><span class="p">(</span><span class="n">InsecureRequestWarning</span><span class="p">)</span>
    <span class="n">get_verified_users</span><span class="p">()</span>
    <span class="n">main</span><span class="p">()</span>




</code></pre></div></div>
:ET